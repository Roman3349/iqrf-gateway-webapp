<?php

/**
 * TEST: App\Model\IqrfMacroManager
 * @phpVersion >= 5.6
 * @testCase
 */
use App\Model\IqrfMacroManager;
use Nette\DI\Container;
use Nette\Utils\FileSystem;
use Tester\Assert;
use Tester\TestCase;

$container = require __DIR__ . '/../bootstrap.php';

class IqrfMacroManagerTest extends TestCase {

	private $container;

	/**
	 * @var string File name of IQRF IDE Macros
	 */
	private $macroFileName = __DIR__ . '/../../iqrf/DPA-macros_170601.iqrfmcr';

	/**
	 * @var array Expected array with macros
	 */
	private $expectedArray = [
		[
			'Name' => 'Coordinator',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'Get number of Nodes',
					'Packet' => '00.00.00.00.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get bonded Nodes',
					'Packet' => '00.00.00.02.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get discovered Nodes',
					'Packet' => '00.00.00.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Authorize node',
					'Packet' => '00.00.00.0D.FF.FF.05.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Bond new Node',
					'Packet' => '00.00.00.04.FF.FF.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Remove bonded Node',
					'Packet' => '00.00.00.05.FF.FF.01.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Re-bond Node',
					'Packet' => '00.00.00.06.FF.FF.01.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Clear all bonds',
					'Packet' => '00.00.00.03.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Run discovery',
					'Packet' => '00.00.00.07.FF.FF.07.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set hops',
					'Packet' => '00.00.00.09.FF.FF.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'DPA params: testing',
					'Packet' => '00.00.00.08.FF.FF.0C.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'DPA params: normal',
					'Packet' => '00.00.00.08.FF.FF.00.',
					'Enabled' => TRUE,
				],
			],
		],
		[
			'Name' => 'Node',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'Read NTW info',
					'Packet' => '00.01.01.00.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Remove bond',
					'Packet' => '00.01.01.01.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M3', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M4', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'Enable prebonding',
					'Packet' => '00.01.01.04.FF.FF.07.01.00.00.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Read prebonded MID',
					'Packet' => '00.01.01.02.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Clear prebonded MID',
					'Packet' => '00.01.01.03.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M8', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M9', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M10', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M11', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M12', 'Packet' => '', 'Enabled' => FALSE],
			],
		],
		[
			'Name' => 'OS, Peripheral info',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'Read info',
					'Packet' => '00.00.02.00.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Reset',
					'Packet' => '00.00.02.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Run RFPGM',
					'Packet' => '00.00.02.03.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Sleep',
					'Packet' => '00.01.02.04.FF.FF.00.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Read HWP configuration',
					'Packet' => '00.01.02.02.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M6', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M7', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M8', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'Peripheral enumeration',
					'Packet' => '00.00.FF.3F.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get peripheral information',
					'Packet' => '00.00.00.3F.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get information for more peripherals',
					'Packet' => '00.00.FF.00.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M12', 'Packet' => '', 'Enabled' => FALSE],
			],
		],
		[
			'Name' => 'Memories',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'EEPROM read',
					'Packet' => '00.00.03.00.FF.FF.00.05.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'EEPROM write',
					'Packet' => '00.00.03.01.FF.FF.00.01.02.03.04.05.',
					'Enabled' => TRUE,
				],
				['Name' => 'M3', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M4', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'EEEPROM read',
					'Packet' => '00.00.04.02.FF.FF.00.00.10.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'EEEPROM write',
					'Packet' => '00.00.04.03.FF.FF.00.00.00.01.02.03.04.05.06.07.08.09.0A.0B.0C.0D.0E.0F.',
					'Enabled' => TRUE,
				],
				['Name' => 'M7', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M8', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'RAM read',
					'Packet' => '00.00.05.00.FF.FF.00.05.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RAM write',
					'Packet' => '00.00.05.01.FF.FF.00.01.02.03.04.05.',
					'Enabled' => TRUE,
				],
				['Name' => 'M11', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M12', 'Packet' => '', 'Enabled' => FALSE],
			],
		],
		[
			'Name' => 'I/O pins',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'Set all pins: OUTs',
					'Packet' => '00.01.09.00.FF.FF.00.21.00.01.10.00.02.FC.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set all pins: LOW',
					'Packet' => '00.01.09.01.FF.FF.00.21.00.01.10.00.02.FC.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set all pins: HIGH',
					'Packet' => '00.01.09.01.FF.FF.00.21.21.01.10.10.02.FC.FC.',
					'Enabled' => TRUE,
				],
				['Name' => 'M4', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'Set all pins: INs',
					'Packet' => '00.01.09.00.FF.FF.00.21.21.01.10.10.02.FC.FC.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set pin C1: LOW',
					'Packet' => '00.01.09.01.FF.FF.00.01.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set pin C1: HIGH',
					'Packet' => '00.01.09.01.FF.FF.00.01.01.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Pulse 1s on C1 pin',
					'Packet' => '00.01.09.01.FF.FF.00.01.01.FF.E8.03.00.01.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get pins state',
					'Packet' => '00.01.09.02.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Play DDC-IO-01',
					'Packet' => '00.01.09.01.FF.FF.02.04.04.FF.96.00.00.01.01.FF.96.00.00.20.20.01.10.10.02.40.40.FF.96.00.02.08.08.FF.96.00.02.10.10.FF.96.00.02.A0.A0.FF.E8.03.00.21.00.01.10.00.02.FC.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'DDC-RE-01: RE1 pulse 1s',
					'Packet' => '00.01.09.01.FF.FF.02.04.04.FF.E8.03.02.04.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'DDC-RE-01: RE2 pulse 1s',
					'Packet' => '00.01.09.01.FF.FF.02.A0.A0.FF.E8.03.02.A0.00.',
					'Enabled' => TRUE,
				],
			],
		],
		[
			'Name' => 'Temp, UART, SPI',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'Get temperature',
					'Packet' => '00.01.0A.00.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M2', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M3', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M4', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'Open UART: 9600',
					'Packet' => '00.01.0C.00.FF.FF.03.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Close UART',
					'Packet' => '00.01.0C.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Write UART',
					'Packet' => '00.01.0C.02.FF.FF.FF.48.65.6C.6C.6F.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Write/read UART',
					'Packet' => '00.01.0C.02.FF.FF.0A.48.65.6C.6C.6F.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Write SPI',
					'Packet' => '00.01.08.00.FF.FF.FF.48.65.6C.6C.6F.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Write/read SPI',
					'Packet' => '00.01.08.00.FF.FF.0A.48.65.6C.6C.6F.',
					'Enabled' => TRUE,
				],
				['Name' => 'M11', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M12', 'Packet' => '', 'Enabled' => FALSE],
			],
		],
		[
			'Name' => 'FRC',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => '2b: Prebonding',
					'Packet' => '00.00.0D.00.FF.FF.00.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => '2b: Acknowledged broadcast',
					'Packet' => '00.00.0D.00.FF.FF.02.05.06.03.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Selective LEDR on',
					'Packet' => '00.00.0D.02.FF.FF.02.3E.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.05.06.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Extra result',
					'Packet' => '00.00.0D.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => '2b: UART/SPI data',
					'Packet' => '00.00.0D.00.FF.FF.01.00.00.',
					'Enabled' => TRUE,
				],
				['Name' => 'M6', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'Selective LEDR off',
					'Packet' => '00.00.0D.02.FF.FF.02.3E.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.05.06.00.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set FRC response time 2560 ms',
					'Packet' => '00.00.0D.03.FF.FF.40.',
					'Enabled' => TRUE,
				],
				[
					'Name' => '1B: Temperature',
					'Packet' => '00.00.0D.00.FF.FF.80.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => '1B: Acknowledged broadcast',
					'Packet' => '00.00.0D.00.FF.FF.81.05.06.03.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M11', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M12', 'Packet' => '', 'Enabled' => FALSE],
			],
		],
		[
			'Name' => 'LED, PWM',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'Set LEDR on',
					'Packet' => '00.00.06.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set LEDG on',
					'Packet' => '00.00.07.01.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Pulse LEDR',
					'Packet' => '00.00.06.03.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Stop PWM',
					'Packet' => '00.01.0B.00.FF.FF.00.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set LEDR off',
					'Packet' => '00.00.06.00.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Set LEDG off',
					'Packet' => '00.00.07.00.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Pulse LEDG',
					'Packet' => '00.00.07.03.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'PWM: 1kHz, 50%',
					'Packet' => '00.01.0B.00.FF.FF.02.7D.40.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get LEDR state',
					'Packet' => '00.00.06.02.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Get LEDG state',
					'Packet' => '00.00.07.02.FF.FF.',
					'Enabled' => TRUE,
				],
				['Name' => 'M11', 'Packet' => '', 'Enabled' => FALSE],
				[
					'Name' => 'PWM: 1kHz, 70%',
					'Packet' => '00.01.0B.00.FF.FF.22.7D.57.',
					'Enabled' => TRUE,
				],
			],
		],
		[
			'Name' => 'Autonetwork embedded',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => '[C] EEPROM config',
					'Packet' => '00.00.03.01.FF.FF.00.07.08.03.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Start autonetwork process',
					'Packet' => '00.00.05.01.FF.FF.00.0A.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'Stop autonetwork process',
					'Packet' => '00.00.05.01.FF.FF.00.80.',
					'Enabled' => TRUE,
				],
				['Name' => 'M4', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M5', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M6', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M7', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M8', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M9', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M10', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M11', 'Packet' => '', 'Enabled' => FALSE],
				['Name' => 'M12', 'Packet' => '', 'Enabled' => FALSE],
			],
		],
		[
			'Name' => 'IoT Starter KIT',
			'Enabled' => TRUE,
			'Macros' => [
				[
					'Name' => 'SE-all-data',
					'Packet' => '00.01.5E.01.FF.FF.FF.FF.FF.FF.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'FRC-temperature 2B',
					'Packet' => '00.00.0D.00.FF.FF.E0.5E.01.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'FRC-photoresistor',
					'Packet' => '00.00.0D.00.FF.FF.90.5E.81.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'FRC-potentiometer',
					'Packet' => '00.00.0D.00.FF.FF.90.5E.81.01.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-off,RE2-off',
					'Packet' => '00.02.4B.00.FF.FF.0C.00.00.00.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-on,RE2-on',
					'Packet' => '00.02.4B.00.FF.FF.0C.00.00.00.01.01.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-on,RE2-off',
					'Packet' => '00.02.4B.00.FF.FF.0C.00.00.00.01.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-off,RE2-on',
					'Packet' => '00.02.4B.00.FF.FF.0C.00.00.00.00.01.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-on',
					'Packet' => '00.02.4B.00.FF.FF.04.00.00.00.01.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-off',
					'Packet' => '00.02.4B.00.FF.FF.04.00.00.00.00.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE1-on 1s',
					'Packet' => '00.02.4B.00.FF.FF.04.00.00.00.81.',
					'Enabled' => TRUE,
				],
				[
					'Name' => 'RE2-on 2s',
					'Packet' => '00.02.4B.00.FF.FF.08.00.00.00.82.',
					'Enabled' => TRUE,
				],
			],
		],
	];

	/**
	 * @var string IQRF IDE macros in HEX 
	 */
	private $hex = '300D0A300D0A31300D0A436F6F7264696E61746F720D0A547275650D0A300D0A476574206E756D626572206F66204E6F6465730D0A30302E30302E30302E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A47657420626F6E646564204E6F6465730D0A30302E30302E30302E30322E46462E46462E0D0A547275650D0A300D0A46616C73650D0A47657420646973636F7665726564204E6F6465730D0A30302E30302E30302E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A417574686F72697A65206E6F64650D0A30302E30302E30302E30442E46462E46462E30352E30302E30302E0D0A547275650D0A300D0A46616C73650D0A426F6E64206E6577204E6F64650D0A30302E30302E30302E30342E46462E46462E30302E30302E0D0A547275650D0A300D0A46616C73650D0A52656D6F766520626F6E646564204E6F64650D0A30302E30302E30302E30352E46462E46462E30312E0D0A547275650D0A300D0A547275650D0A52652D626F6E64204E6F64650D0A30302E30302E30302E30362E46462E46462E30312E0D0A547275650D0A300D0A46616C73650D0A436C65617220616C6C20626F6E64730D0A30302E30302E30302E30332E46462E46462E0D0A547275650D0A300D0A547275650D0A52756E20646973636F766572790D0A30302E30302E30302E30372E46462E46462E30372E30302E0D0A547275650D0A300D0A46616C73650D0A53657420686F70730D0A30302E30302E30302E30392E46462E46462E46462E46462E0D0A547275650D0A300D0A46616C73650D0A44504120706172616D733A2074657374696E670D0A30302E30302E30302E30382E46462E46462E30432E0D0A547275650D0A300D0A46616C73650D0A44504120706172616D733A206E6F726D616C0D0A30302E30302E30302E30382E46462E46462E30302E0D0A547275650D0A300D0A46616C73650D0A4E6F64650D0A547275650D0A310D0A52656164204E545720696E666F0D0A30302E30312E30312E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A52656D6F766520626F6E640D0A30302E30312E30312E30312E46462E46462E0D0A547275650D0A300D0A547275650D0A4D330D0A0D0A46616C73650D0A300D0A46616C73650D0A4D340D0A0D0A46616C73650D0A300D0A46616C73650D0A456E61626C6520707265626F6E64696E670D0A30302E30312E30312E30342E46462E46462E30372E30312E30302E30302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A5265616420707265626F6E646564204D49440D0A30302E30312E30312E30322E46462E46462E0D0A547275650D0A300D0A46616C73650D0A436C65617220707265626F6E646564204D49440D0A30302E30312E30312E30332E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4D380D0A0D0A46616C73650D0A300D0A46616C73650D0A4D390D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31300D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31310D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31320D0A0D0A46616C73650D0A300D0A46616C73650D0A4F532C205065726970686572616C20696E666F0D0A547275650D0A320D0A5265616420696E666F0D0A30302E30302E30322E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A52657365740D0A30302E30302E30322E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A52756E20524650474D0D0A30302E30302E30322E30332E46462E46462E0D0A547275650D0A300D0A46616C73650D0A536C6565700D0A30302E30312E30322E30342E46462E46462E30302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A526561642048575020636F6E66696775726174696F6E0D0A30302E30312E30322E30322E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4D360D0A0D0A46616C73650D0A300D0A46616C73650D0A4D370D0A0D0A46616C73650D0A300D0A46616C73650D0A4D380D0A0D0A46616C73650D0A300D0A46616C73650D0A5065726970686572616C20656E756D65726174696F6E0D0A30302E30302E46462E33462E46462E46462E0D0A547275650D0A300D0A46616C73650D0A476574207065726970686572616C20696E666F726D6174696F6E0D0A30302E30302E30302E33462E46462E46462E0D0A547275650D0A300D0A46616C73650D0A47657420696E666F726D6174696F6E20666F72206D6F7265207065726970686572616C730D0A30302E30302E46462E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4D31320D0A0D0A46616C73650D0A300D0A46616C73650D0A4D656D6F726965730D0A547275650D0A330D0A454550524F4D20726561640D0A30302E30302E30332E30302E46462E46462E30302E30352E0D0A547275650D0A300D0A46616C73650D0A454550524F4D2077726974650D0A30302E30302E30332E30312E46462E46462E30302E30312E30322E30332E30342E30352E0D0A547275650D0A300D0A46616C73650D0A4D330D0A0D0A46616C73650D0A300D0A46616C73650D0A4D340D0A0D0A46616C73650D0A300D0A46616C73650D0A45454550524F4D20726561640D0A30302E30302E30342E30322E46462E46462E30302E30302E31302E0D0A547275650D0A300D0A46616C73650D0A45454550524F4D2077726974650D0A30302E30302E30342E30332E46462E46462E30302E30302E30302E30312E30322E30332E30342E30352E30362E30372E30382E30392E30412E30422E30432E30442E30452E30462E0D0A547275650D0A300D0A46616C73650D0A4D370D0A0D0A46616C73650D0A300D0A46616C73650D0A4D380D0A0D0A46616C73650D0A300D0A46616C73650D0A52414D20726561640D0A30302E30302E30352E30302E46462E46462E30302E30352E0D0A547275650D0A300D0A46616C73650D0A52414D2077726974650D0A30302E30302E30352E30312E46462E46462E30302E30312E30322E30332E30342E30352E0D0A547275650D0A300D0A46616C73650D0A4D31310D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31320D0A0D0A46616C73650D0A300D0A46616C73650D0A492F4F2070696E730D0A547275650D0A340D0A53657420616C6C2070696E733A204F5554730D0A30302E30312E30392E30302E46462E46462E30302E32312E30302E30312E31302E30302E30322E46432E30302E0D0A547275650D0A300D0A46616C73650D0A53657420616C6C2070696E733A204C4F570D0A30302E30312E30392E30312E46462E46462E30302E32312E30302E30312E31302E30302E30322E46432E30302E0D0A547275650D0A300D0A46616C73650D0A53657420616C6C2070696E733A20484947480D0A30302E30312E30392E30312E46462E46462E30302E32312E32312E30312E31302E31302E30322E46432E46432E0D0A547275650D0A300D0A46616C73650D0A4D340D0A0D0A46616C73650D0A300D0A46616C73650D0A53657420616C6C2070696E733A20494E730D0A30302E30312E30392E30302E46462E46462E30302E32312E32312E30312E31302E31302E30322E46432E46432E0D0A547275650D0A300D0A46616C73650D0A5365742070696E2043313A204C4F570D0A30302E30312E30392E30312E46462E46462E30302E30312E30302E0D0A547275650D0A300D0A46616C73650D0A5365742070696E2043313A20484947480D0A30302E30312E30392E30312E46462E46462E30302E30312E30312E0D0A547275650D0A300D0A46616C73650D0A50756C7365203173206F6E2043312070696E0D0A30302E30312E30392E30312E46462E46462E30302E30312E30312E46462E45382E30332E30302E30312E30302E0D0A547275650D0A300D0A46616C73650D0A4765742070696E732073746174650D0A30302E30312E30392E30322E46462E46462E0D0A547275650D0A300D0A46616C73650D0A506C6179204444432D494F2D30310D0A30302E30312E30392E30312E46462E46462E30322E30342E30342E46462E39362E30302E30302E30312E30312E46462E39362E30302E30302E32302E32302E30312E31302E31302E30322E34302E34302E46462E39362E30302E30322E30382E30382E46462E39362E30302E30322E31302E31302E46462E39362E30302E30322E41302E41302E46462E45382E30332E30302E32312E30302E30312E31302E30302E30322E46432E30302E0D0A547275650D0A300D0A46616C73650D0A4444432D52452D30313A205245312070756C73652031730D0A30302E30312E30392E30312E46462E46462E30322E30342E30342E46462E45382E30332E30322E30342E30302E0D0A547275650D0A300D0A46616C73650D0A4444432D52452D30313A205245322070756C73652031730D0A30302E30312E30392E30312E46462E46462E30322E41302E41302E46462E45382E30332E30322E41302E30302E0D0A547275650D0A300D0A46616C73650D0A54656D702C20554152542C205350490D0A547275650D0A350D0A4765742074656D70657261747572650D0A30302E30312E30412E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4D320D0A0D0A46616C73650D0A300D0A46616C73650D0A4D330D0A0D0A46616C73650D0A300D0A46616C73650D0A4D340D0A0D0A46616C73650D0A300D0A46616C73650D0A4F70656E20554152543A20393630300D0A30302E30312E30432E30302E46462E46462E30332E0D0A547275650D0A300D0A46616C73650D0A436C6F736520554152540D0A30302E30312E30432E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A577269746520554152540D0A30302E30312E30432E30322E46462E46462E46462E34382E36352E36432E36432E36462E0D0A547275650D0A300D0A46616C73650D0A57726974652F7265616420554152540D0A30302E30312E30432E30322E46462E46462E30412E34382E36352E36432E36432E36462E0D0A547275650D0A300D0A46616C73650D0A5772697465205350490D0A30302E30312E30382E30302E46462E46462E46462E34382E36352E36432E36432E36462E0D0A547275650D0A300D0A46616C73650D0A57726974652F72656164205350490D0A30302E30312E30382E30302E46462E46462E30412E34382E36352E36432E36432E36462E0D0A547275650D0A300D0A46616C73650D0A4D31310D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31320D0A0D0A46616C73650D0A300D0A46616C73650D0A4652430D0A547275650D0A360D0A32623A20507265626F6E64696E670D0A30302E30302E30442E30302E46462E46462E30302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A32623A2041636B6E6F776C65646765642062726F6164636173740D0A30302E30302E30442E30302E46462E46462E30322E30352E30362E30332E46462E46462E0D0A547275650D0A300D0A46616C73650D0A53656C656374697665204C454452206F6E0D0A30302E30302E30442E30322E46462E46462E30322E33452E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30352E30362E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A457874726120726573756C740D0A30302E30302E30442E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A32623A20554152542F53504920646174610D0A30302E30302E30442E30302E46462E46462E30312E30302E30302E0D0A547275650D0A300D0A46616C73650D0A4D360D0A0D0A46616C73650D0A300D0A46616C73650D0A53656C656374697665204C454452206F66660D0A30302E30302E30442E30322E46462E46462E30322E33452E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30302E30352E30362E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A5365742046524320726573706F6E73652074696D652032353630206D730D0A30302E30302E30442E30332E46462E46462E34302E0D0A547275650D0A300D0A46616C73650D0A31423A2054656D70657261747572650D0A30302E30302E30442E30302E46462E46462E38302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A31423A2041636B6E6F776C65646765642062726F6164636173740D0A30302E30302E30442E30302E46462E46462E38312E30352E30362E30332E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4D31310D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31320D0A0D0A46616C73650D0A300D0A46616C73650D0A4C45442C2050574D0D0A547275650D0A370D0A536574204C454452206F6E0D0A30302E30302E30362E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A536574204C454447206F6E0D0A30302E30302E30372E30312E46462E46462E0D0A547275650D0A300D0A46616C73650D0A50756C7365204C4544520D0A30302E30302E30362E30332E46462E46462E0D0A547275650D0A300D0A46616C73650D0A53746F702050574D0D0A30302E30312E30422E30302E46462E46462E30302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A536574204C454452206F66660D0A30302E30302E30362E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A536574204C454447206F66660D0A30302E30302E30372E30302E46462E46462E0D0A547275650D0A300D0A46616C73650D0A50756C7365204C4544470D0A30302E30302E30372E30332E46462E46462E0D0A547275650D0A300D0A46616C73650D0A50574D3A20316B487A2C203530250D0A30302E30312E30422E30302E46462E46462E30322E37442E34302E0D0A547275650D0A300D0A46616C73650D0A476574204C4544522073746174650D0A30302E30302E30362E30322E46462E46462E0D0A547275650D0A300D0A46616C73650D0A476574204C4544472073746174650D0A30302E30302E30372E30322E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4D31310D0A0D0A46616C73650D0A300D0A46616C73650D0A50574D3A20316B487A2C203730250D0A30302E30312E30422E30302E46462E46462E32322E37442E35372E0D0A547275650D0A300D0A46616C73650D0A4175746F6E6574776F726B20656D6265646465640D0A547275650D0A380D0A5B435D20454550524F4D20636F6E6669670D0A30302E30302E30332E30312E46462E46462E30302E30372E30382E30332E30302E0D0A547275650D0A300D0A547275650D0A5374617274206175746F6E6574776F726B2070726F636573730D0A30302E30302E30352E30312E46462E46462E30302E30412E0D0A547275650D0A300D0A46616C73650D0A53746F70206175746F6E6574776F726B2070726F636573730D0A30302E30302E30352E30312E46462E46462E30302E38302E0D0A547275650D0A300D0A46616C73650D0A4D340D0A0D0A46616C73650D0A300D0A46616C73650D0A4D350D0A0D0A46616C73650D0A300D0A46616C73650D0A4D360D0A0D0A46616C73650D0A300D0A46616C73650D0A4D370D0A0D0A46616C73650D0A300D0A46616C73650D0A4D380D0A0D0A46616C73650D0A300D0A46616C73650D0A4D390D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31300D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31310D0A0D0A46616C73650D0A300D0A46616C73650D0A4D31320D0A0D0A46616C73650D0A300D0A46616C73650D0A496F542053746172746572204B49540D0A547275650D0A390D0A53452D616C6C2D646174610D0A30302E30312E35452E30312E46462E46462E46462E46462E46462E46462E0D0A547275650D0A300D0A46616C73650D0A4652432D74656D70657261747572652032420D0A30302E30302E30442E30302E46462E46462E45302E35452E30312E30302E30302E0D0A547275650D0A300D0A46616C73650D0A4652432D70686F746F7265736973746F720D0A30302E30302E30442E30302E46462E46462E39302E35452E38312E30302E30302E0D0A547275650D0A300D0A46616C73650D0A4652432D706F74656E74696F6D657465720D0A30302E30302E30442E30302E46462E46462E39302E35452E38312E30312E30302E0D0A547275650D0A300D0A46616C73650D0A5245312D6F66662C5245322D6F66660D0A30302E30322E34422E30302E46462E46462E30432E30302E30302E30302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A5245312D6F6E2C5245322D6F6E0D0A30302E30322E34422E30302E46462E46462E30432E30302E30302E30302E30312E30312E0D0A547275650D0A300D0A46616C73650D0A5245312D6F6E2C5245322D6F66660D0A30302E30322E34422E30302E46462E46462E30432E30302E30302E30302E30312E30302E0D0A547275650D0A300D0A46616C73650D0A5245312D6F66662C5245322D6F6E0D0A30302E30322E34422E30302E46462E46462E30432E30302E30302E30302E30302E30312E0D0A547275650D0A300D0A46616C73650D0A5245312D6F6E0D0A30302E30322E34422E30302E46462E46462E30342E30302E30302E30302E30312E0D0A547275650D0A300D0A46616C73650D0A5245312D6F66660D0A30302E30322E34422E30302E46462E46462E30342E30302E30302E30302E30302E0D0A547275650D0A300D0A46616C73650D0A5245312D6F6E2031730D0A30302E30322E34422E30302E46462E46462E30342E30302E30302E30302E38312E0D0A547275650D0A300D0A46616C73650D0A5245322D6F6E2032730D0A30302E30322E34422E30302E46462E46462E30382E30302E30302E30302E38322E0D0A547275650D0A300D0A46616C73650D0A';

	function __construct(Container $container) {
		$this->container = $container;
	}

	/**
	 * @test
	 * Test function to convert HEX to ASCII
	 */
	public function testHex2Ascii() {
		$iqrfMacroManager = new IqrfMacroManager($this->macroFileName);
		$ascii = $iqrfMacroManager->hex2ascii($this->hex);
		$expected = FileSystem::read(__DIR__ . '/data/macros-ascii.expected');
		Assert::equal($expected, $ascii);
	}

	/**
	 * @test
	 * Test function to parse array of macros
	 */
	public function testParseMacro() {
		$iqrfMacroManager = new IqrfMacroManager($this->macroFileName);
		$array = ['Coordinator', 'True', '0', 'Get number of Nodes', '00.00.00.00.FF.FF.', 'True', '0', 'False', 'Get bonded Nodes', '00.00.00.02.FF.FF.', 'True', '0', 'False', 'Get discovered Nodes', '00.00.00.01.FF.FF.', 'True', '0', 'False', 'Authorize node', '00.00.00.0D.FF.FF.05.00.00.', 'True', '0', 'False', 'Bond new Node', '00.00.00.04.FF.FF.00.00.', 'True', '0', 'False', 'Remove bonded Node', '00.00.00.05.FF.FF.01.', 'True', '0', 'True', 'Re-bond Node', '00.00.00.06.FF.FF.01.', 'True', '0', 'False', 'Clear all bonds', '00.00.00.03.FF.FF.', 'True', '0', 'True', 'Run discovery', '00.00.00.07.FF.FF.07.00.', 'True', '0', 'False', 'Set hops', '00.00.00.09.FF.FF.FF.FF.', 'True', '0', 'False', 'DPA params: testing', '00.00.00.08.FF.FF.0C.', 'True', '0', 'False', 'DPA params: normal', '00.00.00.08.FF.FF.00.', 'True', '0', 'False', 'Node', 'True', '1', 'Read NTW info', '00.01.01.00.FF.FF.', 'True', '0', 'False', 'Remove bond', '00.01.01.01.FF.FF.', 'True', '0', 'True', 'M3', '', 'False', '0', 'False', 'M4', '', 'False', '0', 'False', 'Enable prebonding', '00.01.01.04.FF.FF.07.01.00.00.00.00.', 'True', '0', 'False', 'Read prebonded MID', '00.01.01.02.FF.FF.', 'True', '0', 'False', 'Clear prebonded MID', '00.01.01.03.FF.FF.', 'True', '0', 'False', 'M8', '', 'False', '0', 'False', 'M9', '', 'False', '0', 'False', 'M10', '', 'False', '0', 'False', 'M11', '', 'False', '0', 'False', 'M12', '', 'False', '0', 'False', 'OS, Peripheral info', 'True', '2', 'Read info', '00.00.02.00.FF.FF.', 'True', '0', 'False', 'Reset', '00.00.02.01.FF.FF.', 'True', '0', 'False', 'Run RFPGM', '00.00.02.03.FF.FF.', 'True', '0', 'False', 'Sleep', '00.01.02.04.FF.FF.00.00.00.', 'True', '0', 'False', 'Read HWP configuration', '00.01.02.02.FF.FF.', 'True', '0', 'False', 'M6', '', 'False', '0', 'False', 'M7', '', 'False', '0', 'False', 'M8', '', 'False', '0', 'False', 'Peripheral enumeration', '00.00.FF.3F.FF.FF.', 'True', '0', 'False', 'Get peripheral information', '00.00.00.3F.FF.FF.', 'True', '0', 'False', 'Get information for more peripherals', '00.00.FF.00.FF.FF.', 'True', '0', 'False', 'M12', '', 'False', '0', 'False', 'Memories', 'True', '3', 'EEPROM read', '00.00.03.00.FF.FF.00.05.', 'True', '0', 'False', 'EEPROM write', '00.00.03.01.FF.FF.00.01.02.03.04.05.', 'True', '0', 'False', 'M3', '', 'False', '0', 'False', 'M4', '', 'False', '0', 'False', 'EEEPROM read', '00.00.04.02.FF.FF.00.00.10.', 'True', '0', 'False', 'EEEPROM write', '00.00.04.03.FF.FF.00.00.00.01.02.03.04.05.06.07.08.09.0A.0B.0C.0D.0E.0F.', 'True', '0', 'False', 'M7', '', 'False', '0', 'False', 'M8', '', 'False', '0', 'False', 'RAM read', '00.00.05.00.FF.FF.00.05.', 'True', '0', 'False', 'RAM write', '00.00.05.01.FF.FF.00.01.02.03.04.05.', 'True', '0', 'False', 'M11', '', 'False', '0', 'False', 'M12', '', 'False', '0', 'False', 'I/O pins', 'True', '4', 'Set all pins: OUTs', '00.01.09.00.FF.FF.00.21.00.01.10.00.02.FC.00.', 'True', '0', 'False', 'Set all pins: LOW', '00.01.09.01.FF.FF.00.21.00.01.10.00.02.FC.00.', 'True', '0', 'False', 'Set all pins: HIGH', '00.01.09.01.FF.FF.00.21.21.01.10.10.02.FC.FC.', 'True', '0', 'False', 'M4', '', 'False', '0', 'False', 'Set all pins: INs', '00.01.09.00.FF.FF.00.21.21.01.10.10.02.FC.FC.', 'True', '0', 'False', 'Set pin C1: LOW', '00.01.09.01.FF.FF.00.01.00.', 'True', '0', 'False', 'Set pin C1: HIGH', '00.01.09.01.FF.FF.00.01.01.', 'True', '0', 'False', 'Pulse 1s on C1 pin', '00.01.09.01.FF.FF.00.01.01.FF.E8.03.00.01.00.', 'True', '0', 'False', 'Get pins state', '00.01.09.02.FF.FF.', 'True', '0', 'False', 'Play DDC-IO-01', '00.01.09.01.FF.FF.02.04.04.FF.96.00.00.01.01.FF.96.00.00.20.20.01.10.10.02.40.40.FF.96.00.02.08.08.FF.96.00.02.10.10.FF.96.00.02.A0.A0.FF.E8.03.00.21.00.01.10.00.02.FC.00.', 'True', '0', 'False', 'DDC-RE-01: RE1 pulse 1s', '00.01.09.01.FF.FF.02.04.04.FF.E8.03.02.04.00.', 'True', '0', 'False', 'DDC-RE-01: RE2 pulse 1s', '00.01.09.01.FF.FF.02.A0.A0.FF.E8.03.02.A0.00.', 'True', '0', 'False', 'Temp, UART, SPI', 'True', '5', 'Get temperature', '00.01.0A.00.FF.FF.', 'True', '0', 'False', 'M2', '', 'False', '0', 'False', 'M3', '', 'False', '0', 'False', 'M4', '', 'False', '0', 'False', 'Open UART: 9600', '00.01.0C.00.FF.FF.03.', 'True', '0', 'False', 'Close UART', '00.01.0C.01.FF.FF.', 'True', '0', 'False', 'Write UART', '00.01.0C.02.FF.FF.FF.48.65.6C.6C.6F.', 'True', '0', 'False', 'Write/read UART', '00.01.0C.02.FF.FF.0A.48.65.6C.6C.6F.', 'True', '0', 'False', 'Write SPI', '00.01.08.00.FF.FF.FF.48.65.6C.6C.6F.', 'True', '0', 'False', 'Write/read SPI', '00.01.08.00.FF.FF.0A.48.65.6C.6C.6F.', 'True', '0', 'False', 'M11', '', 'False', '0', 'False', 'M12', '', 'False', '0', 'False', 'FRC', 'True', '6', '2b: Prebonding', '00.00.0D.00.FF.FF.00.00.00.', 'True', '0', 'False', '2b: Acknowledged broadcast', '00.00.0D.00.FF.FF.02.05.06.03.FF.FF.', 'True', '0', 'False', 'Selective LEDR on', '00.00.0D.02.FF.FF.02.3E.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.05.06.01.FF.FF.', 'True', '0', 'False', 'Extra result', '00.00.0D.01.FF.FF.', 'True', '0', 'False', '2b: UART/SPI data', '00.00.0D.00.FF.FF.01.00.00.', 'True', '0', 'False', 'M6', '', 'False', '0', 'False', 'Selective LEDR off', '00.00.0D.02.FF.FF.02.3E.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.00.05.06.00.FF.FF.', 'True', '0', 'False', 'Set FRC response time 2560 ms', '00.00.0D.03.FF.FF.40.', 'True', '0', 'False', '1B: Temperature', '00.00.0D.00.FF.FF.80.00.00.', 'True', '0', 'False', '1B: Acknowledged broadcast', '00.00.0D.00.FF.FF.81.05.06.03.FF.FF.', 'True', '0', 'False', 'M11', '', 'False', '0', 'False', 'M12', '', 'False', '0', 'False', 'LED, PWM', 'True', '7', 'Set LEDR on', '00.00.06.01.FF.FF.', 'True', '0', 'False', 'Set LEDG on', '00.00.07.01.FF.FF.', 'True', '0', 'False', 'Pulse LEDR', '00.00.06.03.FF.FF.', 'True', '0', 'False', 'Stop PWM', '00.01.0B.00.FF.FF.00.00.00.', 'True', '0', 'False', 'Set LEDR off', '00.00.06.00.FF.FF.', 'True', '0', 'False', 'Set LEDG off', '00.00.07.00.FF.FF.', 'True', '0', 'False', 'Pulse LEDG', '00.00.07.03.FF.FF.', 'True', '0', 'False', 'PWM: 1kHz, 50%', '00.01.0B.00.FF.FF.02.7D.40.', 'True', '0', 'False', 'Get LEDR state', '00.00.06.02.FF.FF.', 'True', '0', 'False', 'Get LEDG state', '00.00.07.02.FF.FF.', 'True', '0', 'False', 'M11', '', 'False', '0', 'False', 'PWM: 1kHz, 70%', '00.01.0B.00.FF.FF.22.7D.57.', 'True', '0', 'False', 'Autonetwork embedded', 'True', '8', '[C] EEPROM config', '00.00.03.01.FF.FF.00.07.08.03.00.', 'True', '0', 'True', 'Start autonetwork process', '00.00.05.01.FF.FF.00.0A.', 'True', '0', 'False', 'Stop autonetwork process', '00.00.05.01.FF.FF.00.80.', 'True', '0', 'False', 'M4', '', 'False', '0', 'False', 'M5', '', 'False', '0', 'False', 'M6', '', 'False', '0', 'False', 'M7', '', 'False', '0', 'False', 'M8', '', 'False', '0', 'False', 'M9', '', 'False', '0', 'False', 'M10', '', 'False', '0', 'False', 'M11', '', 'False', '0', 'False', 'M12', '', 'False', '0', 'False', 'IoT Starter KIT', 'True', '9', 'SE-all-data', '00.01.5E.01.FF.FF.FF.FF.FF.FF.', 'True', '0', 'False', 'FRC-temperature 2B', '00.00.0D.00.FF.FF.E0.5E.01.00.00.', 'True', '0', 'False', 'FRC-photoresistor', '00.00.0D.00.FF.FF.90.5E.81.00.00.', 'True', '0', 'False', 'FRC-potentiometer', '00.00.0D.00.FF.FF.90.5E.81.01.00.', 'True', '0', 'False', 'RE1-off,RE2-off', '00.02.4B.00.FF.FF.0C.00.00.00.00.00.', 'True', '0', 'False', 'RE1-on,RE2-on', '00.02.4B.00.FF.FF.0C.00.00.00.01.01.', 'True', '0', 'False', 'RE1-on,RE2-off', '00.02.4B.00.FF.FF.0C.00.00.00.01.00.', 'True', '0', 'False', 'RE1-off,RE2-on', '00.02.4B.00.FF.FF.0C.00.00.00.00.01.', 'True', '0', 'False', 'RE1-on', '00.02.4B.00.FF.FF.04.00.00.00.01.', 'True', '0', 'False', 'RE1-off', '00.02.4B.00.FF.FF.04.00.00.00.00.', 'True', '0', 'False', 'RE1-on 1s', '00.02.4B.00.FF.FF.04.00.00.00.81.', 'True', '0', 'False', 'RE2-on 2s', '00.02.4B.00.FF.FF.08.00.00.00.82.', 'True', '0', 'False'];
		$macros = $iqrfMacroManager->parseMacro($array);
		Assert::equal($this->expectedArray, $macros);
	}

	/**
	 * @test
	 * Test function to parse hex of macros
	 */
	public function testParseMacros() {
		$iqrfMacroManager = new IqrfMacroManager($this->macroFileName);
		$macros = $iqrfMacroManager->parseMacros($this->hex);
		Assert::equal($this->expectedArray, $macros);
	}

	/**
	 * @test
	 * Test function to read IQRF IDE macros
	 */
	public function testRead() {
		$iqrfMacroManager = new IqrfMacroManager($this->macroFileName);
		$macros = $iqrfMacroManager->read();
		Assert::equal($this->expectedArray, $macros);
	}

}

$test = new IqrfMacroManagerTest($container);
$test->run();
